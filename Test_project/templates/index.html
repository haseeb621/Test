<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Index</title>
</head>
<body>
    <h1></h1>
    <h2>Signup</h2>
    <form method="POST" action="{% url 'signup_view' %}">
        {% csrf_token %}
        <label for="username">Username:</label>
        <input type="text" id="username" name="username" required><br>
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required><br>
        <label for="password">Password:</label>
        <input type="password" id="password" name="password" required><br>
        <label for="password_confirm">Confirm Password:</label>
        <input type="password" id="password_confirm" name="password_confirm" required><br>
        <button type="submit">Signup</button>
    </form>

    <h2>Login</h2>
    
  

    {% if user.is_authenticated %}
        <!-- Logout Button -->
        <form method="POST" action="{% url 'logout_view' %}">
            {% csrf_token %}
            <button type="submit">Logout</button>
        </form>

        <!-- Fetch CSV Data -->
        <h2>Fetch CSV Data</h2>
        <form method="POST" action="{% url 'fetch_csv' %}">
            {% csrf_token %}
            <button type="submit">Fetch Data</button>
        </form>

     
        <h2> Data</h2>
        <div id="fetched-data">
            {% if fetched_data %}
                <ul>
                    {% for row in fetched_data %}
                        <li>{{ row }}</li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>No data fetched yet.</p>
            {% endif %}
        </div>
    {% else %}
  <form method="POST" action="{% url 'login_view' %}">
        {% csrf_token %}
        <label for="uname">Username:</label>
        <input type="text" id="uname" name="uname" required><br>
        <label for="pass1">Password:</label>
        <input type="password" id="pass1" name="pass1" required><br>
        <button type="submit">Login</button>
    </form>
        <p>Authenticate first</p>
    {% endif %}

    <!-- Display Messages -->
    {% if messages %}
        <ul>
            {% for message in messages %}
                <li>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}
</body>
</html>